{"version":3,"file":"index.js","sources":["../src/components/editor.tsx","../src/components/previewHtml.tsx","../src/components/pdf.tsx"],"sourcesContent":["/* eslint-disable no-unused-vars */\nimport * as React from 'react'\n\nconst JoditEditor = React.lazy(() => {\n  return import('jodit-react')\n})\n\nconst Editor = React.forwardRef((props: any, ref) => {\n  if (typeof window === 'undefined') {\n    return null\n  }\n  return (\n    <React.Suspense fallback={<div>Loading</div>}>\n      <JoditEditor ref={ref as any} {...props} />\n    </React.Suspense>\n  )\n})\n\nexport { Editor }\n","import * as React from 'react'\n\ninterface IPreviewHtml {\n  content: any\n}\n\nconst PreviewHtml: React.FC<IPreviewHtml> = ({ content }) => {\n  return <div dangerouslySetInnerHTML={{ __html: content }} />\n}\n\nexport { PreviewHtml }\n","import React, { PureComponent } from 'react'\nimport JsPdf from 'jspdf'\nimport html2canvas from 'html2canvas'\n\nexport class Pdf extends PureComponent<any> {\n  targetRef: React.RefObject<unknown>\n  constructor(props: any) {\n    super(props)\n    this.toPdf = this.toPdf.bind(this)\n    this.targetRef = React.createRef()\n  }\n\n  async toPdf() {\n    const {\n      targetRef,\n      filename = 'download.pdf',\n      scale = 1,\n      options,\n      onComplete\n    } = this.props\n    const source = targetRef || this.targetRef\n    const targetComponent = source.current || source\n    if (!targetComponent) {\n      throw new Error(\n        'Target ref must be used or informed. See https://github.com/ivmarcos/react-to-pdf#usage.'\n      )\n    }\n    const canvas = await html2canvas(targetComponent, {\n      logging: false,\n      useCORS: true,\n      scale: scale\n    })\n    const imgData = canvas.toDataURL('image/png')\n    const doc: any = new JsPdf(options)\n    const imgWidth = doc.internal.pageSize.getWidth()\n    const pageHeight = doc.internal.pageSize.getHeight()\n    const imgHeight = (canvas.height * imgWidth) / canvas.width\n    let heightLeft = imgHeight\n    let position = 0\n\n    doc.addImage(imgData, 'PNG', 0, position, imgWidth, imgHeight)\n    heightLeft -= pageHeight\n    while (heightLeft >= 0) {\n      position = heightLeft - imgHeight\n      doc.addPage()\n      doc.addImage(imgData, 'PNG', 0, position, imgWidth, imgHeight)\n      heightLeft -= pageHeight\n    }\n\n    if (onComplete) onComplete({ pdf: doc, filename })\n  }\n\n  render() {\n    const { children }: any = this.props\n    return children({ toPdf: this.toPdf, targetRef: this.targetRef })\n  }\n}\n"],"names":["JoditEditor","React","Editor","props","ref","window","fallback","PreviewHtml","content","dangerouslySetInnerHTML","__html","Pdf","toPdf","bind","targetRef","createRef","filename","scale","options","onComplete","source","targetComponent","current","Error","html2canvas","logging","useCORS","canvas","imgData","toDataURL","doc","JsPdf","imgWidth","internal","pageSize","getWidth","pageHeight","getHeight","imgHeight","height","width","heightLeft","position","addImage","addPage","pdf","render","children","PureComponent"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;AAGA,IAAMA,WAAW,GAAGC,UAAA,CAAW;EAC7B,OAAO,mEAAO,aAAP,OAAP;AACD,CAFmB,CAApB;IAIMC,MAAM,GAAGD,gBAAA,CAAiB,UAACE,KAAD,EAAaC,GAAb;EAC9B,IAAI,OAAOC,MAAP,KAAkB,WAAtB,EAAmC;IACjC,OAAO,IAAP;;;EAEF,OACEJ,mBAAA,CAACA,cAAD;IAAgBK,QAAQ,EAAEL,mBAAA,MAAA,MAAA,WAAA;GAA1B,EACEA,mBAAA,CAACD,WAAD;IAAaI,GAAG,EAAEA;KAAgBD,MAAlC,CADF,CADF;AAKD,CATc;;ICDTI,WAAW,GAA2B,SAAtCA,WAAsC;MAAGC,eAAAA;EAC7C,OAAOP,mBAAA,MAAA;IAAKQ,uBAAuB,EAAE;MAAEC,MAAM,EAAEF;;GAAxC,CAAP;AACD,CAFD;;;;;;;;;;;;;;;;;;;;;;;;;ICFaG,GAAb;EAAA;;EAEE,aAAYR,KAAZ;;;IACE,kCAAMA,KAAN;IACA,MAAKS,KAAL,GAAa,MAAKA,KAAL,CAAWC,IAAX,+BAAb;IACA,MAAKC,SAAL,GAAiBb,cAAK,CAACc,SAAN,EAAjB;;;;EALJ;;EAAA,OAQQH,KARR;IAAA;mBAeQ;;MANJ,mBAMI,OAAKT,KANT;UACEW,SADF,gBACEA,SADF;+CAEEE,QAFF;UAEEA,QAFF,sCAEa,cAFb;4CAGEC,KAHF;UAGEA,KAHF,mCAGU,CAHV;UAIEC,OAJF,gBAIEA,OAJF;UAKEC,UALF,gBAKEA,UALF;MAOA,IAAMC,MAAM,GAAGN,SAAS,IAAI,OAAKA,SAAjC;MACA,IAAMO,eAAe,GAAGD,MAAM,CAACE,OAAP,IAAkBF,MAA1C;;MACA,IAAI,CAACC,eAAL,EAAsB;QACpB,MAAM,IAAIE,KAAJ,CACJ,0FADI,CAAN;;;6BAImBC,WAAW,CAACH,eAAD,EAAkB;QAChDI,OAAO,EAAE,KADuC;QAEhDC,OAAO,EAAE,IAFuC;QAGhDT,KAAK,EAAEA;OAHuB,kBAA1BU;QAKN,IAAMC,OAAO,GAAGD,MAAM,CAACE,SAAP,CAAiB,WAAjB,CAAhB;QACA,IAAMC,GAAG,GAAQ,IAAIC,KAAJ,CAAUb,OAAV,CAAjB;QACA,IAAMc,QAAQ,GAAGF,GAAG,CAACG,QAAJ,CAAaC,QAAb,CAAsBC,QAAtB,EAAjB;QACA,IAAMC,UAAU,GAAGN,GAAG,CAACG,QAAJ,CAAaC,QAAb,CAAsBG,SAAtB,EAAnB;QACA,IAAMC,SAAS,GAAIX,MAAM,CAACY,MAAP,GAAgBP,QAAjB,GAA6BL,MAAM,CAACa,KAAtD;QACA,IAAIC,UAAU,GAAGH,SAAjB;QACA,IAAII,QAAQ,GAAG,CAAf;QAEAZ,GAAG,CAACa,QAAJ,CAAaf,OAAb,EAAsB,KAAtB,EAA6B,CAA7B,EAAgCc,QAAhC,EAA0CV,QAA1C,EAAoDM,SAApD;QACAG,UAAU,IAAIL,UAAd;;QACA,OAAOK,UAAU,IAAI,CAArB,EAAwB;UACtBC,QAAQ,GAAGD,UAAU,GAAGH,SAAxB;UACAR,GAAG,CAACc,OAAJ;UACAd,GAAG,CAACa,QAAJ,CAAaf,OAAb,EAAsB,KAAtB,EAA6B,CAA7B,EAAgCc,QAAhC,EAA0CV,QAA1C,EAAoDM,SAApD;UACAG,UAAU,IAAIL,UAAd;;;QAGF,IAAIjB,UAAJ,EAAgBA,UAAU,CAAC;UAAE0B,GAAG,EAAEf,GAAP;UAAYd,QAAQ,EAARA;SAAb,CAAV;;KA7CpB;MAAA;;;;EAAA,OAgDE8B,MAhDF,GAgDE;IACE,IAAQC,QAAR,GAA0B,KAAK5C,KAA/B,CAAQ4C,QAAR;IACA,OAAOA,QAAQ,CAAC;MAAEnC,KAAK,EAAE,KAAKA,KAAd;MAAqBE,SAAS,EAAE,KAAKA;KAAtC,CAAf;GAlDJ;;EAAA;AAAA,EAAyBkC,mBAAzB;;;;;;"}